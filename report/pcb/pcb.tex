\chapter{PCB}
\label{sec:pcb}

This chapter will describe the PCB layout, the main components and the design philosophy that went into solving the system requirements.
%\section{Layout Overview}


\section{Design for Redundancy}

A lot of effort has gone into making sure that if something fails, there is a backup plan.
This means that most of the wires are connected to jumpers, which can be rerouted manually.
Because of this, the board is not optimized for size, but was rather made to optimize for
highest possible chance of success.

In addition, small graphic that goes 

\begin{verbatim}
 -----------------
| Backup solution |
|                 |
|  -------------  |
| | Core design | |
| |             | |
| |             | |
| --------------- |
|                 |
 -----------------
\end{verbatim}

\section{Main Components}

\subsection{Microcontroller / System Control Unit}
The EFM32 Giant Gecko 32-bit Microcontroller from Energy Micro was chosen as the controller for this project.
A microcontroller from Energy Micro was required for the task and this particular controller is
very energy efficient, which is a plus.
In addition to this, there were a lot of development boards available,
plus over half of the group had experience with this controller from the subject
TDT4258 Energy Efficient Computer Systems.

The EFM32GG990F512-BGA112 was chosen as a powerful enough version of the microcontroller.

\section{Input}
Was solved through usb for data communication between microcontroller and host PC, plus a serial(RS-232) backup scheme.

\section{Output}
Main scheme was HDMI connector. Backup: HDMI headers with gutted cable connected, then $\mu$ -VGA module conected to the FPGA and finally $\mu$ -VGA module connected to the microcontroller.
\todo{It seems really weird to talk about the my-VGA module. what is this?}

\section{Power}
usb connection with successive headers that allow for using an external power supply in case power fails.

\section{Bus}
Standard EBI connection between FPGA and MCU, but with headers in between such that external connection can be done in case of failure on one side of the connection, as well as an easy way to check transmitted signals during debugging.

\section{Clocks}
FPGA oscillator along with header on which an external oscillator resource can be connected by way of backup.
The microcontroller clocks on the other hand have a backup solution in that the microcontroller has internal RC-oscilators for use in case the crystals malfunction.

\section{Soldering}

\input{pcb/Solder.tex}

\section{Footprints}
Predominantly SMDs(surface mounted device) large enough for humans to solder(with a couple of exceptions)

\input{pcb/hdmi.tex}

\todo{...Uncertain ie om at vi endra litt pÃ¥ en del footprints, men pga hvordan fysiske komponenter funker,}

\subsubsection{Prebundled}

\subsubsection{Handmade}
Some footprints we had to make ourselves.
This was done inside Altium.
The specification for the footprints was found in the datasheets of the component in question.

When making the handmade footprints some other thoughts were taken into account.

\begin{itemize}
    \item We need to solder these components
    \item The connection on the components is physical, as long as it leads current, it will work.
    \item Some datasheets didn't match the component exactly, but was for a sister component
\end{itemize}

With this in mind we made footprints which was slightly bigger than it needed to.

\begin{verbatim}
Needed:                 Actual:
--------------          --------------
|            |          |            |
|--|      |--|       |--|--|      |--|--|
|  |      |  |       |  |  |      |  |  |
|..|      |--|       |--|..|      |--|--|
|            |          |            |
--------------          --------------
\end{verbatim}
>>>>>>> Add intro footprint
